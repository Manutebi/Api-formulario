<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css">

    <title>Formulario2</title>
</head>
<body>
    <div class="container mt-5">
        <h3 class="text-center mb-4">Formulario</h3>
        <form id="product-form" class="row g-3">
            <div class="col-md-6">
                <label for="nombre" class="form-label">Nombre:</label>
                <input type="text" id="nombre" name="Nombre" class="form-control">
            </div>
            <div class="col-md-6">
                <label for="descripcion" class="form-label">Descripción:</label>
                <input type="text" id="descripcion" name="Descripcion" class="form-control">
            </div>
            <div class="col-md-6">
                <label for="precio" class="form-label">Precio:</label>
                <div class="input-group">
                    <span class="input-group-text">$</span>
                    <input type="number" id="precio" name="Precio" class="form-control">
                </div>
            </div>

            <div class="col-md-6">
                <label for="ociones" class="form-label">Opciones:</label>
                <select id="Opciones"  class="form-control">
                   
                </select>
            </div>
            <div class="col-md-6">
                <label for="table2" class="form-label">Table 2:</label>
                <input type="text" id="table2" name="table2" class="form-control">
            </div>
            <div class="col-md-6">
                <label for="name" class="form-label">Name:</label>
                <input type="text" id="name" name="name" class="form-control">
            </div>

            <div class="col-md-6">
                <label for="name2" class="form-label">Name2:</label>
                <input type="text" id="name2" name="name2" class="form-control">
            </div>

            <div class="col-md-6">
                <label for="note" class="form-label">Note:</label>
                <input type="text" id="note" name="note" class="form-control">
            </div>

            <div class="col-md-6">
                <label for="assignee" class="form-label">Assignee:</label>
                <input type="text" id="assignee" name="assignee" class="form-control">
            </div>

            <div class="col-md-6">
                <label for="status" class="form-label">Status:</label>
                <input type="text" id="status" name="status" class="form-control">
            </div>


            <div class="col-md-12">
                <button type="button" onclick="enviarDatos()" class="btn btn-primary">Enviar</button>
            </div>
            <div class="col-md-12">
                <button type="button" onclick="actualizarDatos()" class="btn btn-primary">Actualizar</button>
            </div>   
        </form>
    </div>

    <script>
        // Obtener el valor del parámetro "ID" de la URL de la página actual
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const ID = urlParams.get("ID");

        fetch(`https://api.airtable.com/v0/appU7lYsFSoNH4hGO/Productos/${ID}`, {
            headers: {
                Authorization: "Bearer keykY5YjFxN23izT6"
            }
        })
        .then(response => response.json())
        .then(data => {
            // Establecer los valores de los campos del formulario
            document.getElementById("nombre").value = data.fields.Nombre;
            document.getElementById("descripcion").value = data.fields.Descripcion;
            document.getElementById("precio").value = data.fields.Precio;
            document.getElementById("name").value = data.fields.Name;
            document.getElementById("name2").value = data.fields.Name2;
            document.getElementById("table2").value = data.fields.Table2;
            document.getElementById("note").value = data.fields.Note;
            document.getElementById("assignee").value = data.fields.Assignee;
            document.getElementById("status").value = data.fields.Status;

        })

        .catch(error => {
            console.error(error);
        });
        
            
        // Manejar la presentación del formulario
        const form = document.getElementById("product-form");
        form.addEventListener("submit", function(event) {
            event.preventDefault();
            // Aquí  agregro la funcion para enviar los datos actualizados a la API
        });

        fetch("https://api.airtable.com/v0/appU7lYsFSoNH4hGO/Productos", {
            headers: {
                Authorization: "Bearer keykY5YjFxN23izT6"
            }
        })
        .then(response => response.json())
        .then(data => {
            const selectElement = document.getElementById("Opciones");
            data.records.forEach(record => {
                const optionElement = document.createElement("option");
                optionElement.value = record.fields.Opciones;
                optionElement.textContent = record.fields.Opciones;
                selectElement.appendChild(optionElement);
            });
        })
        .catch(error => {
            console.error(error);
        });



    </script>
</body>
</html>
